<!-- src/app/features/provisions/provisions-management/provisions-management.component.html -->
<div class="provisions-management">
  
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-content">
        <div class="title-section">
          <!-- ADD BACK BUTTON -->
          <button mat-button routerLink="/manager/dashboard" class="back-button-enhanced">
            <mat-icon>arrow_back</mat-icon>
            <span>Back to Dashboard</span>
          </button>
          <h1>
            <mat-icon>assignment</mat-icon>
            Provisions Management
          </h1>
          <p>Manage and track provision requests</p>
        </div>
        
        <div class="action-buttons">
          <!-- Add Create button -->
          <button mat-raised-button 
                  color="primary"
                  (click)="createNewProvision()">
            <mat-icon>add</mat-icon>
            Create Provision
          </button>
          
          <button mat-raised-button 
                  color="accent"
                  (click)="uploadProvisions()">
            <mat-icon>upload</mat-icon>
            Upload Provisions
          </button>
          
          <button mat-raised-button 
                  color="primary"
                  (click)="exportProvisions()">
            <mat-icon>download</mat-icon>
            Export
          </button>
          
          <button mat-icon-button 
                  (click)="refreshData()"
                  matTooltip="Refresh">
            <mat-icon>refresh</mat-icon>
          </button>
        </div>
      </div>
    </div>
  
    <!-- Statistics Cards -->
    <div class="stats-cards">
      <div class="stat-card pending">
        <div class="stat-icon">
          <mat-icon>schedule</mat-icon>
        </div>
        <div class="stat-content">
          <h3>{{ pendingCount }}</h3>
          <p>Pending Assignment</p>
        </div>
      </div>
      
      <div class="stat-card assigned">
        <div class="stat-icon">
          <mat-icon>assignment_ind</mat-icon>
        </div>
        <div class="stat-content">
          <h3>{{ assignedCount }}</h3>
          <p>Assigned</p>
        </div>
      </div>
      
      <div class="stat-card passed">
        <div class="stat-icon">
          <mat-icon>check_circle</mat-icon>
        </div>
        <div class="stat-content">
          <h3>{{ passedCount }}</h3>
          <p>Passed</p>
        </div>
      </div>
      
      <div class="stat-card failed">
        <div class="stat-icon">
          <mat-icon>error</mat-icon>
        </div>
        <div class="stat-content">
          <h3>{{ failedCount }}</h3>
          <p>Failed</p>
        </div>
      </div>
    </div>
  
    <!-- Bulk Actions Bar -->
    <div class="bulk-actions" *ngIf="selectedProvisions.length > 0">
      <div class="selection-info">
        <mat-icon>info</mat-icon>
        <span>{{ selectedProvisions.length }} provision(s) selected</span>
      </div>
      
      <div class="bulk-buttons">
        <button mat-raised-button 
                color="primary"
                (click)="bulkAssignAuditor()">
          <mat-icon>person_add</mat-icon>
          Assign Auditor
        </button>
        
        <button mat-raised-button 
                color="warn"
                (click)="bulkDelete()">
          <mat-icon>delete</mat-icon>
          Delete Selected
        </button>
      </div>
    </div>
  
    <!-- Data Table -->
    <div class="table-section">
      <app-enhanced-data-table
        [data]="provisions"
        [config]="tableConfig"
        [actions]="tableActions"
        [loading]="loading"
        [totalCount]="totalCount"
        (pageChange)="onPageChange($event)"
        (sortChange)="onSortChange($event)"
        (searchChange)="onSearchChange($event)"
        (selectionChange)="onSelectionChange($event)">
      </app-enhanced-data-table>
    </div>
  
  </div>